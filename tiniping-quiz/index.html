<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>티니핑 이름 퀴즈</title>
  <style>
    :root {
      --bg-a: #fff7fc;
      --bg-b: #edf8ff;
      --card: #ffffff;
      --line: #ffd7ea;
      --text: #2a2a2a;
      --main: #ff4f9d;
      --sub: #49b3ff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Malgun Gothic", sans-serif;
      color: var(--text);
      background: linear-gradient(150deg, var(--bg-a), var(--bg-b));
      display: grid;
      place-items: center;
      padding: 20px;
    }

    .app {
      width: min(820px, 100%);
      background: rgba(255, 255, 255, 0.88);
      border: 1px solid #fff;
      border-radius: 18px;
      box-shadow: 0 12px 24px rgba(96, 132, 176, 0.2);
      padding: 18px;
    }

    .top {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }

    h1 {
      margin: 0;
      color: var(--main);
      font-size: clamp(22px, 3vw, 30px);
    }

    .stat {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      font-weight: 700;
      font-size: 14px;
    }

    .pill {
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 6px 10px;
      background: #fff;
    }

    .quiz {
      display: grid;
      gap: 14px;
    }

    .image-wrap {
      width: min(360px, 100%);
      margin: 0 auto;
      border: 1px solid var(--line);
      border-radius: 16px;
      overflow: hidden;
      background: #fff;
      aspect-ratio: 1 / 1;
      display: grid;
      place-items: center;
      padding: 8px;
    }

    .image-wrap img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .choices {
      display: grid;
      gap: 10px;
      grid-template-columns: 1fr 1fr;
    }

    .choice {
      border: 0;
      border-radius: 12px;
      padding: 13px 12px;
      font-size: clamp(30px, 5vw, 46px);
      font-weight: 700;
      cursor: pointer;
      color: white;
      transition: transform 140ms ease, filter 140ms ease;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.22);
    }

    #choiceA {
      background: linear-gradient(120deg, #ff4f9d, #ff8457);
    }

    #choiceB {
      background: linear-gradient(120deg, #49b3ff, #6f82ff);
    }

    .choice:hover { transform: translateY(-2px); filter: brightness(1.04); }

    .choice:disabled {
      opacity: 0.65;
      cursor: default;
    }

    .message {
      min-height: 28px;
      text-align: center;
      font-weight: 700;
      color: var(--sub);
      font-size: clamp(18px, 2.4vw, 26px);
    }

    .result {
      text-align: center;
      display: none;
      margin-top: 8px;
    }

    .result.show { display: block; }

    #restart {
      margin-top: 10px;
      border: 0;
      background: #333;
      color: #fff;
      border-radius: 10px;
      padding: 10px 12px;
      font-weight: 700;
      cursor: pointer;
    }

    .action-pop {
      animation: pop 260ms ease;
    }

    .action-shake {
      animation: shake 330ms ease;
    }

    .effects-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 999;
    }

    .firework {
      --dx: 0px;
      --dy: -100px;
      --size: 8px;
      --dur: 850ms;
      --hue: 0deg;
      position: absolute;
      width: var(--size);
      height: var(--size);
      left: 0;
      top: 0;
      border-radius: 50%;
      background: hsl(var(--hue), 94%, 60%);
      box-shadow: 0 0 10px hsl(var(--hue), 94%, 60%);
      animation: firework-burst var(--dur) ease-out forwards;
    }

    @keyframes pop {
      0% { transform: scale(1); }
      45% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      50% { transform: translateX(8px); }
      75% { transform: translateX(-6px); }
      100% { transform: translateX(0); }
    }

    @keyframes firework-burst {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translate(var(--dx), var(--dy)) scale(0.2);
        opacity: 0;
      }
    }

    @media (max-width: 640px) {
      .choices { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div id="effectsLayer" class="effects-layer"></div>
  <main class="app">
    <div class="top">
      <h1>티니핑 이름 맞추기</h1>
      <div class="stat">
        <span class="pill">문제: <span id="progress">1</span> / <span id="totalQuestionsTop">10</span></span>
        <span class="pill">점수: <span id="score">0</span></span>
      </div>
    </div>

    <section class="quiz">
      <div class="image-wrap">
        <img id="characterImage" alt="티니핑 캐릭터" />
      </div>

      <div class="choices">
        <button id="choiceA" class="choice" type="button"></button>
        <button id="choiceB" class="choice" type="button"></button>
      </div>

      <div id="message" class="message">이미지를 보고 이름을 고르세요.</div>

      <div id="result" class="result">
        <h2>퀴즈 완료</h2>
        <p>최종 점수: <strong id="finalScore">0</strong> / <span id="totalQuestionsFinal">10</span></p>
        <button id="restart" type="button">다시 하기</button>
      </div>
    </section>
  </main>

  <script>
    const characters = [
      { name: "가면핑", src: "./assets/images/characters/가면핑.webp" },
      { name: "간호핑", src: "./assets/images/characters/간호핑.webp" },
      { name: "고쳐핑", src: "./assets/images/characters/고쳐핑.png" },
      { name: "공쥬핑", src: "./assets/images/characters/공쥬핑.webp" },
      { name: "그림핑", src: "./assets/images/characters/그림핑.webp" },
      { name: "까르핑", src: "./assets/images/characters/까르핑.webp" },
      { name: "깜빡핑", src: "./assets/images/characters/깜빡핑.webp" },
      { name: "깡총핑", src: "./assets/images/characters/깡총핑.webp" },
      { name: "꺼꿀핑", src: "./assets/images/characters/꺼꿀핑.webp" },
      { name: "꼼딱핑", src: "./assets/images/characters/꼼딱핑.png" },
      { name: "꽁꽁핑", src: "./assets/images/characters/꽁꽁핑.webp" },
      { name: "꾸래핑", src: "./assets/images/characters/꾸래핑.webp" },
      { name: "꾸며핑", src: "./assets/images/characters/꾸며핑.webp" },
      { name: "나나핑", src: "./assets/images/characters/나나핑.webp" },
      { name: "나르핑", src: "./assets/images/characters/나르핑.webp" },
      { name: "노라핑", src: "./assets/images/characters/노라핑.webp" },
      { name: "노리핑", src: "./assets/images/characters/노리핑.webp" },
      { name: "눈꽃핑", src: "./assets/images/characters/눈꽃핑.webp" },
      { name: "다롱핑", src: "./assets/images/characters/다롱핑.webp" },
      { name: "다조핑", src: "./assets/images/characters/다조핑.webp" },
      { name: "다해핑", src: "./assets/images/characters/다해핑.webp" },
      { name: "달콤핑", src: "./assets/images/characters/달콤핑.webp" },
      { name: "덜덜핑", src: "./assets/images/characters/덜덜핑.webp" },
      { name: "따라핑", src: "./assets/images/characters/따라핑.webp" },
      { name: "딱풀핑", src: "./assets/images/characters/딱풀핑.webp" },
      { name: "떠벌핑", src: "./assets/images/characters/떠벌핑.webp" },
      { name: "또까핑", src: "./assets/images/characters/또까핑.webp" },
      { name: "또너핑", src: "./assets/images/characters/또너핑.webp" },
      { name: "똑똑핑", src: "./assets/images/characters/똑똑핑.webp" },
      { name: "뚝딱핑", src: "./assets/images/characters/뚝딱핑.webp" },
      { name: "뜨거핑", src: "./assets/images/characters/뜨거핑.png" },
      { name: "띠용핑", src: "./assets/images/characters/띠용핑.webp" },
      { name: "라라핑", src: "./assets/images/characters/라라핑.webp" },
      { name: "롤리핑", src: "./assets/images/characters/롤리핑.webp" },
      { name: "마카핑", src: "./assets/images/characters/마카핑.webp" },
      { name: "말랑핑", src: "./assets/images/characters/말랑핑.webp" },
      { name: "맛나핑", src: "./assets/images/characters/맛나핑.webp" },
      { name: "머랭핑", src: "./assets/images/characters/머랭핑.webp" },
      { name: "메모핑", src: "./assets/images/characters/메모핑.webp" },
      { name: "멜로핑", src: "./assets/images/characters/멜로핑.webp" },
      { name: "모야핑", src: "./assets/images/characters/모야핑.webp" },
      { name: "무거핑", src: "./assets/images/characters/무거핑.webp" },
      { name: "무셔핑", src: "./assets/images/characters/무셔핑.webp" },
      { name: "믿어핑", src: "./assets/images/characters/믿어핑.webp" },
      { name: "바네핑", src: "./assets/images/characters/바네핑.webp" },
      { name: "바로핑", src: "./assets/images/characters/바로핑.webp" },
      { name: "발레핑", src: "./assets/images/characters/발레핑.webp" },
      { name: "방글핑", src: "./assets/images/characters/방글핑.webp" },
      { name: "베베핑", src: "./assets/images/characters/베베핑.webp" },
      { name: "부끄핑", src: "./assets/images/characters/부끄핑.webp" },
      { name: "부투핑", src: "./assets/images/characters/부투핑.webp" },
      { name: "빙글핑", src: "./assets/images/characters/빙글핑.webp" },
      { name: "빛나핑", src: "./assets/images/characters/빛나핑.webp" },
      { name: "빤짝핑", src: "./assets/images/characters/빤짝핑.webp" },
      { name: "빨리핑", src: "./assets/images/characters/빨리핑.png" },
      { name: "뿌뿌핑", src: "./assets/images/characters/뿌뿌핑.webp" },
      { name: "삐뽀핑", src: "./assets/images/characters/삐뽀핑.png" },
      { name: "삐짐핑", src: "./assets/images/characters/삐짐핑.webp" },
      { name: "새콤핑", src: "./assets/images/characters/새콤핑.webp" },
      { name: "샌드핑", src: "./assets/images/characters/샌드핑.webp" },
      { name: "샤샤핑", src: "./assets/images/characters/샤샤핑.webp" },
      { name: "소원핑", src: "./assets/images/characters/소원핑.webp" },
      { name: "솔찌핑", src: "./assets/images/characters/솔찌핑.webp" },
      { name: "시러핑", src: "./assets/images/characters/시러핑.webp" },
      { name: "싹싹핑", src: "./assets/images/characters/싹싹핑.webp" },
      { name: "씽씽핑", src: "./assets/images/characters/씽씽핑.webp" },
      { name: "아라핑", src: "./assets/images/characters/아라핑.png" },
      { name: "아아핑", src: "./assets/images/characters/아아핑.webp" },
      { name: "아야핑", src: "./assets/images/characters/아야핑.webp" },
      { name: "아잉핑", src: "./assets/images/characters/아잉핑.webp" },
      { name: "아자핑", src: "./assets/images/characters/아자핑.webp" },
      { name: "아휴핑", src: "./assets/images/characters/아휴핑.webp" },
      { name: "악동핑", src: "./assets/images/characters/악동핑.webp" },
      { name: "앙대핑", src: "./assets/images/characters/앙대핑.webp" },
      { name: "얌얌핑", src: "./assets/images/characters/얌얌핑.png" },
      { name: "와플핑", src: "./assets/images/characters/와플핑.webp" },
      { name: "요거핑", src: "./assets/images/characters/요거핑.webp" },
      { name: "원더핑", src: "./assets/images/characters/원더핑.webp" },
      { name: "조아핑", src: "./assets/images/characters/조아핑.webp" },
      { name: "주네핑", src: "./assets/images/characters/주네핑.webp" },
      { name: "주르핑", src: "./assets/images/characters/주르핑.webp" },
      { name: "짝짝핑", src: "./assets/images/characters/짝짝핑.webp" },
      { name: "쪼꼬핑", src: "./assets/images/characters/쪼꼬핑.webp" },
      { name: "쪼꼼핑", src: "./assets/images/characters/쪼꼼핑.webp" },
      { name: "찌릿핑", src: "./assets/images/characters/찌릿핑.webp" },
      { name: "차나핑", src: "./assets/images/characters/차나핑.webp" },
      { name: "차차핑", src: "./assets/images/characters/차차핑.webp" },
      { name: "차캐핑", src: "./assets/images/characters/차캐핑.webp" },
      { name: "초롱핑", src: "./assets/images/characters/초롱핑.webp" },
      { name: "캔디핑", src: "./assets/images/characters/캔디핑.webp" },
      { name: "코자핑", src: "./assets/images/characters/코자핑.webp" },
      { name: "키키핑", src: "./assets/images/characters/키키핑.webp" },
      { name: "토닥핑", src: "./assets/images/characters/토닥핑.webp" },
      { name: "토이핑", src: "./assets/images/characters/토이핑.webp" },
      { name: "투투핑", src: "./assets/images/characters/투투핑.webp" },
      { name: "트러핑", src: "./assets/images/characters/트러핑.webp" },
      { name: "파티핑", src: "./assets/images/characters/파티핑.webp" },
      { name: "패션핑", src: "./assets/images/characters/패션핑.png" },
      { name: "포근핑", src: "./assets/images/characters/포근핑.webp" },
      { name: "포실핑", src: "./assets/images/characters/포실핑.webp" },
      { name: "퐁당핑", src: "./assets/images/characters/퐁당핑.png" },
      { name: "푸딩핑", src: "./assets/images/characters/푸딩핑.webp" },
      { name: "플라핑", src: "./assets/images/characters/플라핑.webp" },
      { name: "하츄핑", src: "./assets/images/characters/하츄핑.webp" },
      { name: "핫케핑", src: "./assets/images/characters/핫케핑.webp" },
      { name: "해핑", src: "./assets/images/characters/해핑.webp" },
      { name: "행운핑", src: "./assets/images/characters/행운핑.webp" },
      { name: "홀로핑", src: "./assets/images/characters/홀로핑.webp" },
      { name: "화나핑", src: "./assets/images/characters/화나핑.webp" },
      { name: "힘내핑", src: "./assets/images/characters/힘내핑.png" }
    ];

    const imageEl = document.getElementById("characterImage");
    const choiceA = document.getElementById("choiceA");
    const choiceB = document.getElementById("choiceB");
    const progressEl = document.getElementById("progress");
    const scoreEl = document.getElementById("score");
    const messageEl = document.getElementById("message");
    const resultEl = document.getElementById("result");
    const finalScoreEl = document.getElementById("finalScore");
    const totalQuestionsTopEl = document.getElementById("totalQuestionsTop");
    const totalQuestionsFinalEl = document.getElementById("totalQuestionsFinal");
    const effectsLayerEl = document.getElementById("effectsLayer");
    const restartBtn = document.getElementById("restart");

    let order = [];
    let currentIndex = 0;
    let score = 0;
    let correctName = "";
    let locked = false;
    let wrongAttempts = 0;

    function shuffle(arr) {
      const copy = [...arr];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy;
    }

    function getWrongName(answer) {
      const others = characters.filter((x) => x.name !== answer);
      const pick = others[Math.floor(Math.random() * others.length)];
      return pick.name;
    }

    function setChoiceButtons(answer, wrong) {
      const labels = Math.random() < 0.5 ? [answer, wrong] : [wrong, answer];
      choiceA.textContent = labels[0];
      choiceB.textContent = labels[1];
      choiceA.disabled = false;
      choiceB.disabled = false;
    }

    function updateStats() {
      progressEl.textContent = String(Math.min(currentIndex + 1, characters.length));
      scoreEl.textContent = String(score);
    }

    function launchFireworks() {
      const bursts = 3;
      const piecesPerBurst = 20;
      for (let b = 0; b < bursts; b++) {
        const originX = Math.random() * window.innerWidth;
        const originY = window.innerHeight * (0.25 + Math.random() * 0.35);
        for (let i = 0; i < piecesPerBurst; i++) {
          const dot = document.createElement("span");
          dot.className = "firework";
          const angle = (Math.PI * 2 * i) / piecesPerBurst + (Math.random() * 0.4 - 0.2);
          const distance = 55 + Math.random() * 130;
          const dx = Math.cos(angle) * distance;
          const dy = Math.sin(angle) * distance;
          const hue = Math.floor(Math.random() * 360);
          const size = 6 + Math.random() * 6;
          const duration = 700 + Math.random() * 260;
          dot.style.left = originX + "px";
          dot.style.top = originY + "px";
          dot.style.setProperty("--dx", dx.toFixed(2) + "px");
          dot.style.setProperty("--dy", dy.toFixed(2) + "px");
          dot.style.setProperty("--hue", hue + "deg");
          dot.style.setProperty("--size", size.toFixed(2) + "px");
          dot.style.setProperty("--dur", duration.toFixed(0) + "ms");
          effectsLayerEl.appendChild(dot);
          setTimeout(() => dot.remove(), duration + 80);
        }
      }
    }

    function showQuestion() {
      const item = order[currentIndex];
      correctName = item.name;
      wrongAttempts = 0;
      imageEl.src = item.src;
      imageEl.alt = item.name + " 이미지";
      const wrong = getWrongName(correctName);
      setChoiceButtons(correctName, wrong);
      messageEl.textContent = "이미지를 보고 이름을 고르세요.";
      updateStats();
    }

    function finishGame() {
      finalScoreEl.textContent = String(score);
      resultEl.classList.add("show");
      choiceA.disabled = true;
      choiceB.disabled = true;
      messageEl.textContent = "끝! 다시 하려면 아래 버튼을 누르세요.";
      progressEl.textContent = String(characters.length);
    }

    function handleChoice(name) {
      if (locked) return;
      locked = true;

      if (name === correctName) {
        score += 1;
        messageEl.textContent = "정답! 정말 잘했어요!";
        imageEl.classList.remove("action-shake");
        imageEl.classList.add("action-pop");
        launchFireworks();
        setTimeout(() => imageEl.classList.remove("action-pop"), 280);
        scoreEl.textContent = String(score);
        choiceA.disabled = true;
        choiceB.disabled = true;
        setTimeout(() => {
          currentIndex += 1;
          if (currentIndex >= characters.length) {
            finishGame();
          } else {
            showQuestion();
          }
          locked = false;
        }, 650);
        return;
      }

      wrongAttempts += 1;
      imageEl.classList.remove("action-pop");
      imageEl.classList.add("action-shake");
      setTimeout(() => imageEl.classList.remove("action-shake"), 340);

      if (wrongAttempts < 2) {
        messageEl.textContent = "다시 맞춰보세요! (오답 1/2)";
        setTimeout(() => {
          locked = false;
        }, 220);
        return;
      }

      messageEl.textContent = "틀렸어요! 정답은 " + correctName;
      choiceA.disabled = true;
      choiceB.disabled = true;
      setTimeout(() => {
        currentIndex += 1;
        if (currentIndex >= characters.length) {
          finishGame();
        } else {
          showQuestion();
        }
        locked = false;
      }, 700);
    }

    function startGame() {
      order = shuffle(characters);
      currentIndex = 0;
      score = 0;
      locked = false;
      totalQuestionsTopEl.textContent = String(characters.length);
      totalQuestionsFinalEl.textContent = String(characters.length);
      resultEl.classList.remove("show");
      showQuestion();
    }

    choiceA.addEventListener("click", () => handleChoice(choiceA.textContent));
    choiceB.addEventListener("click", () => handleChoice(choiceB.textContent));
    restartBtn.addEventListener("click", startGame);

    startGame();
  </script>
</body>
</html>

