<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>티니핑 이름 퀴즈</title>
  <style>
    :root {
      --bg-a: #fff7fc;
      --bg-b: #edf8ff;
      --card: #ffffff;
      --line: #ffd7ea;
      --text: #2a2a2a;
      --main: #ff4f9d;
      --sub: #49b3ff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Malgun Gothic", sans-serif;
      color: var(--text);
      background: linear-gradient(150deg, var(--bg-a), var(--bg-b));
      display: grid;
      place-items: center;
      padding: 20px;
    }

    .app {
      width: min(820px, 100%);
      background: rgba(255, 255, 255, 0.88);
      border: 1px solid #fff;
      border-radius: 18px;
      box-shadow: 0 12px 24px rgba(96, 132, 176, 0.2);
      padding: 18px;
    }

    .top {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }

    h1 {
      margin: 0;
      color: var(--main);
      font-size: clamp(22px, 3vw, 30px);
    }

    .stat {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      font-weight: 700;
      font-size: 14px;
    }

    .pill {
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 6px 10px;
      background: #fff;
    }

    .quiz {
      display: grid;
      gap: 14px;
    }

    .image-wrap {
      width: min(360px, 100%);
      margin: 0 auto;
      border: 1px solid var(--line);
      border-radius: 16px;
      overflow: hidden;
      background: #fff;
      aspect-ratio: 1 / 1;
      display: grid;
      place-items: center;
      padding: 8px;
    }

    .image-wrap img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .choices {
      display: grid;
      gap: 10px;
      grid-template-columns: 1fr 1fr;
    }

    .choice {
      border: 0;
      border-radius: 12px;
      padding: 13px 12px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      color: white;
      background: linear-gradient(120deg, var(--main), var(--sub));
    }

    .choice:disabled {
      opacity: 0.65;
      cursor: default;
    }

    .message {
      min-height: 28px;
      text-align: center;
      font-weight: 700;
      color: var(--sub);
    }

    .result {
      text-align: center;
      display: none;
      margin-top: 8px;
    }

    .result.show { display: block; }

    #restart {
      margin-top: 10px;
      border: 0;
      background: #333;
      color: #fff;
      border-radius: 10px;
      padding: 10px 12px;
      font-weight: 700;
      cursor: pointer;
    }

    @media (max-width: 640px) {
      .choices { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <main class="app">
    <div class="top">
      <h1>티니핑 이름 맞추기</h1>
      <div class="stat">
        <span class="pill">문제: <span id="progress">1</span> / 10</span>
        <span class="pill">점수: <span id="score">0</span></span>
      </div>
    </div>

    <section class="quiz">
      <div class="image-wrap">
        <img id="characterImage" alt="티니핑 캐릭터" />
      </div>

      <div class="choices">
        <button id="choiceA" class="choice" type="button"></button>
        <button id="choiceB" class="choice" type="button"></button>
      </div>

      <div id="message" class="message">이미지를 보고 이름을 고르세요.</div>

      <div id="result" class="result">
        <h2>퀴즈 완료</h2>
        <p>최종 점수: <strong id="finalScore">0</strong> / 10</p>
        <button id="restart" type="button">다시 하기</button>
      </div>
    </section>
  </main>

  <script>
    const characters = [
      { name: "빨리핑", src: "./assets/images/characters/빨리핑.png" },
      { name: "얌얌핑", src: "./assets/images/characters/얌얌핑.png" },
      { name: "뜨거핑", src: "./assets/images/characters/뜨거핑.png" },
      { name: "삐뽀핑", src: "./assets/images/characters/삐뽀핑.png" },
      { name: "힘내핑", src: "./assets/images/characters/힘내핑.png" },
      { name: "고쳐핑", src: "./assets/images/characters/고쳐핑.png" },
      { name: "아라핑", src: "./assets/images/characters/아라핑.png" },
      { name: "패션핑", src: "./assets/images/characters/패션핑.png" },
      { name: "꼼딱핑", src: "./assets/images/characters/꼼딱핑.png" },
      { name: "퐁당핑", src: "./assets/images/characters/퐁당핑.png" }
    ];

    const imageEl = document.getElementById("characterImage");
    const choiceA = document.getElementById("choiceA");
    const choiceB = document.getElementById("choiceB");
    const progressEl = document.getElementById("progress");
    const scoreEl = document.getElementById("score");
    const messageEl = document.getElementById("message");
    const resultEl = document.getElementById("result");
    const finalScoreEl = document.getElementById("finalScore");
    const restartBtn = document.getElementById("restart");

    let order = [];
    let currentIndex = 0;
    let score = 0;
    let correctName = "";
    let locked = false;

    function shuffle(arr) {
      const copy = [...arr];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy;
    }

    function getWrongName(answer) {
      const others = characters.filter((x) => x.name !== answer);
      const pick = others[Math.floor(Math.random() * others.length)];
      return pick.name;
    }

    function setChoiceButtons(answer, wrong) {
      const labels = Math.random() < 0.5 ? [answer, wrong] : [wrong, answer];
      choiceA.textContent = labels[0];
      choiceB.textContent = labels[1];
      choiceA.disabled = false;
      choiceB.disabled = false;
    }

    function updateStats() {
      progressEl.textContent = String(Math.min(currentIndex + 1, characters.length));
      scoreEl.textContent = String(score);
    }

    function showQuestion() {
      const item = order[currentIndex];
      correctName = item.name;
      imageEl.src = item.src;
      imageEl.alt = item.name + " 이미지";
      const wrong = getWrongName(correctName);
      setChoiceButtons(correctName, wrong);
      messageEl.textContent = "이미지를 보고 이름을 고르세요.";
      updateStats();
    }

    function finishGame() {
      finalScoreEl.textContent = String(score);
      resultEl.classList.add("show");
      choiceA.disabled = true;
      choiceB.disabled = true;
      messageEl.textContent = "끝! 다시 하려면 아래 버튼을 누르세요.";
      progressEl.textContent = String(characters.length);
    }

    function handleChoice(name) {
      if (locked) return;
      locked = true;

      if (name === correctName) {
        score += 1;
        messageEl.textContent = "정답!";
      } else {
        messageEl.textContent = "오답! 정답은 " + correctName;
      }

      scoreEl.textContent = String(score);
      choiceA.disabled = true;
      choiceB.disabled = true;

      setTimeout(() => {
        currentIndex += 1;
        if (currentIndex >= characters.length) {
          finishGame();
        } else {
          showQuestion();
        }
        locked = false;
      }, 650);
    }

    function startGame() {
      order = shuffle(characters);
      currentIndex = 0;
      score = 0;
      locked = false;
      resultEl.classList.remove("show");
      showQuestion();
    }

    choiceA.addEventListener("click", () => handleChoice(choiceA.textContent));
    choiceB.addEventListener("click", () => handleChoice(choiceB.textContent));
    restartBtn.addEventListener("click", startGame);

    startGame();
  </script>
</body>
</html>
